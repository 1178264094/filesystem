<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Filesystem Relative Proposal</title>
<link href="styles.css" rel="stylesheet">
</head>

<body>

<table border="0" cellpadding="5" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111">
  <tr>
    <td width="277">
<a href="../../../index.htm">
<img src="../../../boost.png" alt="boost.png (6897 bytes)" align="middle" width="300" height="86" border="0"></a></td>
    <td align="middle">
    <font size="7">Filesystem Relative Proposal</font>
    </td>
  </tr>
</table>

<table border="0" cellpadding="5" cellspacing="0" style="border-collapse: collapse"
 bordercolor="#111111" bgcolor="#D7EEFF" width="100%">
  <tr>
    <td><a href="index.htm">Home</a> &nbsp;&nbsp;
    <a href="tutorial.html">Tutorial</a> &nbsp;&nbsp;
    <a href="reference.html">Reference</a> &nbsp;&nbsp;
    <a href="faq.htm">FAQ</a> &nbsp;&nbsp;
    <a href="release_history.html">Releases</a> &nbsp;&nbsp;
    <a href="portability_guide.htm">Portability</a> &nbsp;&nbsp;
    <a href="v3.html">V3 Intro</a> &nbsp;&nbsp;
    <a href="v3_design.html">V3 Design</a> &nbsp;&nbsp;
    <a href="deprecated.html">Deprecated</a> &nbsp;&nbsp;
    <a href="issue_reporting.html">Bug Reports </a>&nbsp;&nbsp;
    </td>
</table>

<p>
      <br>
</p>
<h2>Proposed wording</h2>

<h3>New class path member functions</h3>

<p dir="ltr">The class <code>path</code> <code>normal_relative</code> and <code>
relative</code> member functions perform lexical processing only, and so do not 
follow symlinks. For existing path, or partially existing paths, that may 
contain symlinks use the <code>relative</code> operational functions which do 
follow symlinks.</p>

<pre>path  normal_relative(const path&amp; base) const;</pre>

<blockquote>
  <i>Returns:</i> <code>normal(*this).relative(normal(base))</code>.</blockquote>

<pre>path  relative(const path&amp; base) const;</pre>
<blockquote>
  
  <p><i>Returns:</i> </p>
  
  <ul>
    <li>
  <p dir="ltr"><code>path()</code> if the first mismatched element of <code>
  *this</code> is equal to <code>begin()</code> and the first mismatched element 
  of <code>base</code> is equal to <code>&nbsp;base.begin()</code>, or<br>
&nbsp;</p>
  
    </li>
    <li dir="ltr">
  <p dir="ltr"><code>path(&quot;.&quot;)</code> if the first mismatched element of <code>
  *this</code> is equal to <code>end()</code> and the first mismatched element 
  of base is equal to <code>base.end()</code>, or<br>
&nbsp;</p>
  
    </li>
    <li>An object of class <code>path</code> composed via application of <code>
    operator/= path(&quot;..&quot;)</code> for each element in the sequence [first 
    mismatched element of <code>base</code>, <code>base.end()</code>), and then 
    application of <code>operator/=</code> for each element in the sequence 
    [first mismatched element of <code>p</code>, <code>p.end()</code>).</li>
</ul>
  <p dir="ltr"><i>Remarks:</i> Uses <code>std::mismatch(begin(), end(), 
  base.begin(), base.end())</code> to determine the first mismatched element. 
  Path equality is determined by <code>operator==</code>.</p>
  
</blockquote>
<h3>New operational functions</h3>
<pre>path weakly_canonical(const path&amp; p);
path weakly_canonical(const path&amp; p, system::error_code&amp; ec)</pre>
<pre>&nbsp;</pre>
<pre>path relative(const path&amp; p, system::error_code&amp; ec);</pre>
<blockquote>
<p><i>Returns:</i> <code>relative(p, current_path(), ec)</code>.</p>
  <p><i>Throws:</i>&nbsp; As specified in Error reporting.</p>
  
  </blockquote>
<pre>path relative(const path&amp; p, const path&amp; base=current_path());</pre>
<blockquote>
<p><i>Returns:</i> <code>weakly_canonical(p).relative(weakly_canonical(base))</code>.</p>
  <p><i>Throws:</i> As specified in Error reporting.</p>
</blockquote>
<pre>path relative(const path&amp; p, const path&amp; base, system::error_code&amp; ec);
</pre>
<blockquote>
<p><i>Effects:</i> Creates a temporary object <code>path <i>wc_base</i></code> 
with a value of <code>weakly_canonical(base, ec)</code> and, if no 
error occurred, creates another temporary object <code>path <i>wc_p</i></code> 
with a value of <code>weakly_canonical(p, ec)</code>.</p>
<p><i>Returns:</i> <code><i>wc_p</i>.relative(<i>wc_base</i>)</code> if no error 
occurred during processing of <i>Effects</i>, otherwise <code>path()</code>.</p>
<p><i>Remarks:</i> Names <i><code>wc_base</code></i> and <i><code>wc_p</code></i> 
are for exposition only. These names are not exposed to callers of <code>
relative</code>.</p>
  <p><i>Throws:</i> As specified in Error reporting.</p>
</blockquote>

<hr>
<p>Â© Copyright Beman Dawes 2015</p>
<p>Distributed under the Boost Software License, Version 1.0. See
<a href="http://www.boost.org/LICENSE_1_0.txt">www.boost.org/LICENSE_1_0.txt</a></p>
<p>Revised
<!--webbot bot="Timestamp" S-Type="EDITED" S-Format="%d %B %Y" startspan -->11 August 2015<!--webbot bot="Timestamp" endspan i-checksum="31415" --></p>

</body>

</html>